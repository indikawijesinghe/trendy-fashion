<app-title title="Your Cart" margin="1.5rem 0 0 2.5rem"></app-title>

<app-not-found [visible]="!cart || !cart.cartItems.length"
                notFoundMessage="Cart is Empty!"
                resetLinkText="Back To Homepage"/>

@if (cart && cart.cartItems.length) {
    <div class="container">
        <ul>
            @for(cartItem of cart.cartItems; track cart.cartItems){
                <li>
                    <div>
                        <img [src]="cartItem.item.imageUrl" [alt]="cartItem.item.name">
                    </div>
                    <div>
                        <a [routerLink]="['item', cartItem.item.id]">
                            {{cartItem.item.name}}
                        </a>
                    </div>
                    <div>
                        <select #quantitySelect
                        [value]="cartItem.quantity"
                        (change)="changeQuantity(cartItem, quantitySelect.value)">
                            <option>1</option>
                            <option>2</option>
                            <option>3</option>
                            <option>4</option>
                            <option>5</option>
                            <option>6</option>
                            <option>7</option>
                        </select>
                    </div>
                    <div>
                        {{'Rs:'+cartItem.price.toFixed(2) }}
                    </div>
                    <div>
                        <button class="remove-button" (click)="removeFromCart(cartItem)">Remove</button>
                    </div>
                </li>
            }
        </ul>
        <div class="checkout">
            <div>
                <div class="items-count">{{cart.totalCount}}</div>
                <div class="total-price">{{cart.totalPrice}}</div>
            </div>
            <a [routerLink]="['/checkout']">Proceed to Checkout</a>
        </div>
    </div>
}
